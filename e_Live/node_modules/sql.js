//载入mysql模块

let mysql = require('mysql');

//2 创建与数据库连接

let connection = mysql.createConnection({
    host:"localhost",         //服务器地址
    user:"root",              //用户名
    password:"root",          //密码
    port:"3306",              //服务器端口
    database:"bolg"           //连接的数据库名
});


connection.connect(function (err) {
   if(err)
   {
       console.log(ree);
       return;
   }
   else{
       console.log('   数据库连接成功')
   }
});

exports.getlist = function () {
    let sql = 'select *from article';
    /*
        connection.query(SQL,callback);
        让数据库执行某个sql语句
        callback，它有两个参数
        error：如果出错汇报在error参数
        result：sql执行成功的结果
    */
    let list = [];

    connection.query(sql,function(err,result) {
        if(err){
            console.log(err);
            return;
        }
        list = result;

    });
    return list;
};



//关闭连接
connection.end(function (err) {
    console.log('  数据库已经关闭')
});